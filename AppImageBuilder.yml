# Michelson Interferometer Control Software
# https://github.com/gucci-on-fleek/michelson-interferometer
# SPDX-License-Identifier: MPL-2.0+
# SPDX-FileCopyrightText: 2025 Max Chernoff

version: 1
script:
  - rm -rf ./AppDir/ ./appimage-build/ || true
  - pip3 install --ignore-installed --root-user-action=ignore --prefix=/usr --root=AppDir --requirement /srv/appimage-requirements.txt
  - pip3 install --root-user-action=ignore --prefix=/usr --root=AppDir /srv/


AppDir:
  path: ./AppDir

  app_info:
    id: ca.maxchernoff.michelson_interferometer
    name: Michelson Interferometer
    icon: utilities-terminal
    version: "0.0"
    exec: usr/bin/python3.12
    # exec_args: "$APPDIR/usr/local/bin/michelson-interferometer $@"

  apt:
    arch: amd64
    sources:
      - sourceline: 'deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ noble main restricted universe multiverse'
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x871920D1991BC93C'

    include:
      - adwaita-icon-theme
      - breeze-icon-theme
      - gir1.2-adw-1
      - gir1.2-gtk-4.0
      - gtk-update-icon-cache
      - libadwaita-1-0
      - libc6
      - libgdk-pixbuf2.0-bin
      - libglib2.0-bin
      - libgtk-4-1
      - python3
      - python3-gi
      - python3-gi-cairo

AppImage:
  arch: x86_64
  file_name: Michelson_Interferometer-x86_64.AppImage
